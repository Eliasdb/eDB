{
  "id": "1761993983963-sm8jcg",
  "generator": "workbench-api-model",
  "target": "mission",
  "when": "2025-11-01T10:46:23.963Z",
  "changes": [
    {
      "file": "libs/server/workbench-api/models/src/lib/.gitkeep",
      "action": "create",
      "after": "",
      "afterHash": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"
    },
    {
      "file": "libs/server/workbench-api/models/src/contracts/.gitkeep",
      "action": "create",
      "after": "",
      "afterHash": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"
    },
    {
      "file": "libs/server/workbench-api/models/src/lib/mission.model.ts",
      "action": "update",
      "before": "import type { PaginationPlan } from '@edb-workbench/api/shared';\nimport { z } from 'zod';\n\n// ─────────────────────────────────────────────\n// Schemas\n// ─────────────────────────────────────────────\n\nexport const missionSchema = z.object({\n  id: z.string().uuid(),\n  title: z.string(),\n  status: z.enum(['planned', 'active', 'paused', 'completed', 'failed']),\n  riskLevel: z.number().optional(),\n  eta: z.string().datetime().optional(),\n  agentId: z.string().uuid(),\n\n  createdAt: z.string().datetime(),\n  updatedAt: z.string().datetime(),\n});\nexport type Mission = z.infer<typeof missionSchema>;\n\nexport const createMissionBodySchema = z.object({\n  title: z.string(),\n  status: z.enum(['planned', 'active', 'paused', 'completed', 'failed']),\n  riskLevel: z.number().optional(),\n  eta: z.string().datetime().optional(),\n  agentId: z.string().uuid(),\n});\nexport type CreateMissionBody = z.infer<typeof createMissionBodySchema>;\n\nexport const updateMissionBodySchema = z.object({\n  title: z.string().optional(),\n  status: z\n    .enum(['planned', 'active', 'paused', 'completed', 'failed'])\n    .optional(),\n  riskLevel: z.number().optional(),\n  eta: z.string().datetime().optional(),\n  agentId: z.string().uuid().optional(),\n});\nexport type UpdateMissionBody = z.infer<typeof updateMissionBodySchema>;\n\nexport const missionIdParamSchema = z.object({\n  id: z.string().uuid(),\n});\nexport type MissionIdParam = z.infer<typeof missionIdParamSchema>;\n\n// ─────────────────────────────────────────────\n// Repo interface (no relationships here)\n// ─────────────────────────────────────────────\n\nexport interface MissionRepo {\n  list(args: {\n    plan: PaginationPlan;\n    search?: string;\n    filter?: Record<string, string>;\n  }): Promise<{ rows: Mission[]; total: number }>;\n\n  getById(id: string): Promise<Mission | undefined>;\n  create(data: CreateMissionBody): Promise<Mission>;\n  update(id: string, patch: UpdateMissionBody): Promise<Mission | undefined>;\n  delete(id: string): Promise<boolean>;\n}\n",
      "after": "import type { PaginationPlan } from '@edb-workbench/api/shared';\nimport { z } from 'zod';\n\n// ─────────────────────────────────────────────\n// Schemas\n// ─────────────────────────────────────────────\n\nexport const missionSchema = z.object({\n  id: z.string().uuid(),\n  title: z.string(),\n  status: z.enum(['planned', 'active', 'paused', 'completed', 'failed']),\n  riskLevel: z.number().optional(),\n  eta: z.string().datetime().optional(),\n  createdAt: z.string().datetime(),\n  updatedAt: z.string().datetime(),\n});\nexport type Mission = z.infer<typeof missionSchema>;\n\nexport const createMissionBodySchema = z.object({\n  title: z.string(),\n  status: z.enum(['planned', 'active', 'paused', 'completed', 'failed']),\n  riskLevel: z.number().optional(),\n  eta: z.string().datetime().optional(),\n});\nexport type CreateMissionBody = z.infer<typeof createMissionBodySchema>;\n\nexport const updateMissionBodySchema = z.object({\n  title: z.string().optional(),\n  status: z\n    .enum(['planned', 'active', 'paused', 'completed', 'failed'])\n    .optional(),\n  riskLevel: z.number().optional(),\n  eta: z.string().datetime().optional(),\n});\nexport type UpdateMissionBody = z.infer<typeof updateMissionBodySchema>;\n\nexport const missionIdParamSchema = z.object({\n  id: z.string().uuid(),\n});\nexport type MissionIdParam = z.infer<typeof missionIdParamSchema>;\n\n// ─────────────────────────────────────────────\n// Repo interface (no relationships here)\n// ─────────────────────────────────────────────\n\nexport interface MissionRepo {\n  list(args: {\n    plan: PaginationPlan;\n    search?: string;\n    filter?: Record<string, string>;\n  }): Promise<{ rows: Mission[]; total: number }>;\n\n  getById(id: string): Promise<Mission | undefined>;\n  create(data: CreateMissionBody): Promise<Mission>;\n  update(id: string, patch: UpdateMissionBody): Promise<Mission | undefined>;\n  delete(id: string): Promise<boolean>;\n}\n",
      "beforeHash": "d81d358e9c0cfe613abb068b0bdd3dda599cedd640b43bdc1f5ae725a7dc95f7",
      "afterHash": "a811e8902bae2c7a14be36974a37e898941188e2adc1839156a30087379e117d"
    },
    {
      "file": "libs/server/workbench-api/models/src/contracts/mission.contract.json",
      "action": "update",
      "before": "{\n  \"name\": \"mission\",\n  \"plural\": \"missions\",\n  \"fieldsString\": \"title:string,status:enum(planned|active|paused|completed|failed),riskLevel?:number,eta?:date,agentId:uuid\",\n  \"fields\": [\n    {\n      \"fieldName\": \"title\",\n      \"required\": true,\n      \"tsType\": \"string\",\n      \"zodBase\": \"z.string()\"\n    },\n    {\n      \"fieldName\": \"status\",\n      \"required\": true,\n      \"tsType\": \"'planned' | 'active' | 'paused' | 'completed' | 'failed'\",\n      \"zodBase\": \"z.enum(['planned', 'active', 'paused', 'completed', 'failed'])\"\n    },\n    {\n      \"fieldName\": \"riskLevel\",\n      \"required\": false,\n      \"tsType\": \"number\",\n      \"zodBase\": \"z.number()\"\n    },\n    {\n      \"fieldName\": \"eta\",\n      \"required\": false,\n      \"tsType\": \"string\",\n      \"zodBase\": \"z.string().datetime()\"\n    },\n    {\n      \"fieldName\": \"agentId\",\n      \"required\": true,\n      \"tsType\": \"string\",\n      \"zodBase\": \"z.string().uuid()\"\n    }\n  ],\n  \"relationships\": {\n    \"belongsTo\": [\n      {\n        \"name\": \"agent\",\n        \"to\": \"agents\",\n        \"fk\": \"agentId\",\n        \"required\": true,\n        \"include\": true,\n        \"select\": [\"id\", \"codename\", \"status\", \"clearance\"],\n        \"onDelete\": \"cascade\"\n      }\n    ]\n  }\n}\n",
      "after": "{\n  \"name\": \"mission\",\n  \"plural\": \"missions\",\n  \"fieldsString\": \"title:string,status:enum(planned|active|paused|completed|failed),riskLevel?:number,eta?:date\",\n  \"fields\": [\n    {\n      \"fieldName\": \"title\",\n      \"required\": true,\n      \"tsType\": \"string\",\n      \"zodBase\": \"z.string()\"\n    },\n    {\n      \"fieldName\": \"status\",\n      \"required\": true,\n      \"tsType\": \"'planned' | 'active' | 'paused' | 'completed' | 'failed'\",\n      \"zodBase\": \"z.enum(['planned', 'active', 'paused', 'completed', 'failed'])\"\n    },\n    {\n      \"fieldName\": \"riskLevel\",\n      \"required\": false,\n      \"tsType\": \"number\",\n      \"zodBase\": \"z.number()\"\n    },\n    {\n      \"fieldName\": \"eta\",\n      \"required\": false,\n      \"tsType\": \"string\",\n      \"zodBase\": \"z.string().datetime()\"\n    }\n  ]\n}\n",
      "beforeHash": "2da1549c633c4639790fa0ae76b33a96b45dc67e84aa8561635936c71454242e",
      "afterHash": "0edffb127804d5f272bff9aea3f1d2d39df88278c66dfa30a72165ef68ddb9bc"
    }
  ]
}