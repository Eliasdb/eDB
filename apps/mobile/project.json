{
  "name": "mobile",
  "$schema": "../../node_modules/nx/schemas/project-schema.json",
  "sourceRoot": "apps/mobile/src",
  "projectType": "application",
  "tags": [],
  "// targets": "to see all targets run: nx show project mobile --web",
  "targets": {
    "prebuild:ios": {
      "executor": "nx:run-commands",
      "options": {
        "cwd": "apps/mobile",
        "command": "expo prebuild --platform ios"
      }
    },
    "run:ios": {
      "executor": "nx:run-commands",
      "options": {
        "cwd": "apps/mobile",
        "command": "expo run:ios"
      }
    },
    "start:devclient": {
      "executor": "nx:run-commands",
      "options": {
        "cwd": "apps/mobile",
        "command": "expo start --dev-client"
      }
    },

    "build:web": {
      "executor": "nx:run-commands",
      "options": {
        "cwd": "apps/mobile",
        "command": "expo export:web --output-dir dist"
      }
    },
    "copy:web:to:assets": {
      "executor": "nx:run-commands",
      "options": {
        "commands": [
          "mkdir -p apps/client/edb/src/assets/clara",
          "echo '=== ls apps/mobile ===' && ls -la apps/mobile || true",
          "echo '=== ls apps/mobile/dist ===' && ls -la apps/mobile/dist || true",
          "cp -R apps/mobile/dist/* apps/client/edb/src/assets/clara/"
        ]
      }
    },
    "build:web:full": {
      "executor": "nx:run-commands",
      "options": {
        "cwd": ".",
        "command": "bash -lc '\nset -euo pipefail\ncd apps/mobile\n(\n  expo export --platform web --output-dir dist \\\n  || expo export --platform web \\\n  || expo export:web \\\n  || expo export\n)\nOUT=\"\"\nfor d in dist dist-web web-build .expo/web-build .expo/web; do\n  [ -f \"$d/index.html\" ] && OUT=\"$d\" && break\ndone\n[ -z \"$OUT\" ] && echo \"No web export found\" >&2 && exit 1\necho \"Expo web output at $OUT\"\n# copy to Angular assets\nmkdir -p apps/client/edb/src/assets/clara\nrm -rf apps/client/edb/src/assets/clara/* || true\ncp -R \"$OUT\"/* apps/client/edb/src/assets/clara/\n'"
      }
    }
  }
}
