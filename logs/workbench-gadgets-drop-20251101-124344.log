date: invalid argument 's' for -I
# workbench-gadgets drop @ 
# BASE=http://127.0.0.1:9102

â€¢ Attempt to delete gadgets (if API is running)
jq: error (at <stdin>:0): Cannot iterate over null (null)
â€¢ Attempt to delete suppliers (if API is running)
jq: error (at <stdin>:0): Cannot iterate over null (null)
â€¢ Revert relationship gadgets -> suppliers

 NX  Generating @edb-workbench/plugin:workbench-api-rel

[workbench-api-rel] Reverted â†’ gadgets belongsTo suppliers (fk=supplierId)
UPDATE libs/server/workbench-api/models/src/contracts/gadget.contract.json
UPDATE libs/server/workbench-api/models/src/lib/gadget.model.ts
UPDATE libs/server/workbench-api/infra/src/lib/db/schema.gadgets.ts
UPDATE libs/server/workbench-api/infra/src/lib/repos/gadget.repo.pg.ts
UPDATE libs/server/workbench-api/infra/src/lib/repos/tests/gadget.repo.pg.spec.ts
UPDATE libs/server/workbench-api/resources/src/lib/gadgets/gadget.controller.ts
DELETE libs/server/workbench-api/resources/src/lib/gadgets/_includes.supplier.ts
UPDATE libs/server/workbench-api/resources/src/lib/register.ts
â€¢ Revert infra

 NX  Generating @edb-workbench/plugin:workbench-api-infra

[workbench-api-infra] Reverted â†’ gadgets
DELETE libs/server/workbench-api/infra/src/lib/db/schema.gadgets.ts
DELETE libs/server/workbench-api/infra/src/lib/repos/gadget.repo.pg.ts
DELETE libs/server/workbench-api/infra/src/lib/repos/tests/gadget.repo.pg.spec.ts
UPDATE libs/server/workbench-api/infra/src/index.ts
UPDATE libs/server/workbench-api/infra/src/lib/db/drizzle.ts
UPDATE libs/server/workbench-api/resources-pg/src/lib/index.ts

 NX  Generating @edb-workbench/plugin:workbench-api-infra

[workbench-api-infra] Reverted â†’ suppliers
DELETE libs/server/workbench-api/infra/src/lib/db/schema.suppliers.ts
DELETE libs/server/workbench-api/infra/src/lib/repos/supplier.repo.pg.ts
DELETE libs/server/workbench-api/infra/src/lib/repos/tests/supplier.repo.pg.spec.ts
DELETE libs/server/workbench-api/infra/src/lib/repos/tests
UPDATE libs/server/workbench-api/infra/src/index.ts
UPDATE libs/server/workbench-api/infra/src/lib/db/drizzle.ts
UPDATE libs/server/workbench-api/resources-pg/src/lib/index.ts
â€¢ Revert resources

 NX  Generating @edb-workbench/plugin:workbench-api-resource

[workbench-api-resource] Reverted -> gadgets
UPDATE libs/server/workbench-api/resources/src/lib/register.ts
DELETE libs/server/workbench-api/resources/src/lib/gadgets/gadget.controller.ts
DELETE libs/server/workbench-api/resources/src/lib/gadgets/gadget.service.ts
DELETE libs/server/workbench-api/resources/src/lib/gadgets/index.ts
DELETE libs/server/workbench-api/resources/src/lib/gadgets

 NX  Generating @edb-workbench/plugin:workbench-api-resource

[workbench-api-resource] Reverted -> suppliers
UPDATE libs/server/workbench-api/resources/src/lib/register.ts
DELETE libs/server/workbench-api/resources/src/lib/suppliers/supplier.controller.ts
DELETE libs/server/workbench-api/resources/src/lib/suppliers/supplier.service.ts
DELETE libs/server/workbench-api/resources/src/lib/suppliers/index.ts
DELETE libs/server/workbench-api/resources/src/lib/suppliers
â€¢ Revert models

 NX  Generating @edb-workbench/plugin:workbench-api-model

[workbench-api-model] Reverted model 'gadget'
UPDATE libs/server/workbench-api/models/src/index.ts
DELETE libs/server/workbench-api/models/src/lib/gadget.model.ts
DELETE libs/server/workbench-api/models/src/contracts/gadget.contract.json

 NX  Generating @edb-workbench/plugin:workbench-api-model

[workbench-api-model] Reverted model 'supplier'
UPDATE libs/server/workbench-api/models/src/index.ts
DELETE libs/server/workbench-api/models/src/lib/supplier.model.ts
DELETE libs/server/workbench-api/models/src/contracts/supplier.contract.json
DELETE libs/server/workbench-api/models/src/contracts/.gitkeep
DELETE libs/server/workbench-api/models/src/contracts
â€¢ Generate + apply drop migrations (best-effort)

> nx run workbench-api-infra:"migrations:generate"

> drizzle-kit generate --config=drizzle.config.ts

[90mReading config file '/Users/elias/Documents/Projects/2025_2026/eDB/libs/server/workbench-api/infra/drizzle.config.ts'[39m
[1m4 tables[22m
[1m[22m[1m[34mauthors[39m[22m [90m7 columns 0 indexes 0 fks[39m
[1m[34mbooks[39m[22m [90m7 columns 0 indexes 1 fks[39m
[1m[34mbook_tags[39m[22m [90m3 columns 0 indexes 2 fks[39m
[1m[34mtags[39m[22m [90m4 columns 0 indexes 0 fks[39m

[[32mâœ“[39m] Your SQL migration file âœ [1m[4m[34msrc/lib/migrations/0000_legal_gravity.sql[39m[24m[22m ğŸš€



 NX   Successfully ran target migrations:generate for project workbench-api-infra


View logs and investigate cache misses at https://nx.app/runs/jewSu0OpAU


> nx run workbench-api-infra:migrate

> node src/lib/db/runMigrations.local.cjs

ğŸ’¾ using DATABASE_URL = postgres://workbench_user:secret@127.0.0.1:5432/workbench_dev
â³ Applying 0000_legal_gravity.sql...
âœ… Done: 0000_legal_gravity.sql
ğŸ‰ All migrations applied.



 NX   Successfully ran target migrate for project workbench-api-infra


View logs and investigate cache misses at https://nx.app/runs/hvD17fjEzb


Drop complete. Full log: logs/workbench-gadgets-drop-20251101-124344.log
